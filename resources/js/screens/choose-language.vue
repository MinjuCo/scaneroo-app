<script>
    export default {
        name: 'choose-language',
        components: {
            
        },
        created() {
            this.loadLanguages();
        },
        data() {
            return {
                langOptions: [],
                selectedLang: [{"lang_code": window.default_locale}],
            };
        },
        methods: {
            loadLanguages() {
                return this.$http.get('/api/languages/interface')
                    .then(response => {
                        this.langOptions = response.data;
                        this.selectedLang = this.langOptions.find(x => x.lang_code == window.default_locale);
                    });
            },
        }
    }
</script>

<template>
    <div class="screen screen-language">
        <div class="header">
            <div class="bg-yellow">
                <img :src="'/img/logo_full.svg'" class="logo-lg" />
            </div>
        </div>
        <div class="icon-lg icon-language grid-mid grid-column-center rounded-circle bg-white shadow">
            <svg xmlns="http://www.w3.org/2000/svg" width="56" height="56" viewBox="0 0 64 64">
                <g id="_1" data-name="1" transform="translate(-54.14 -48)">
                    <path id="Path_475" data-name="Path 475" d="M103.471,112a2.388,2.388,0,0,1-1.8-.816L89.063,96.771H64.409A10.281,10.281,0,0,1,54.14,86.5V58.27A10.281,10.281,0,0,1,64.409,48h43.463A10.281,10.281,0,0,1,118.14,58.27V86.5a10.281,10.281,0,0,1-10.269,10.27h-2.012v12.841A2.388,2.388,0,0,1,103.471,112ZM64.409,52.776a5.5,5.5,0,0,0-5.493,5.494V86.5a5.5,5.5,0,0,0,5.493,5.494H90.146a2.388,2.388,0,0,1,1.8.816l9.14,10.448V94.382a2.388,2.388,0,0,1,2.388-2.388h4.392a5.5,5.5,0,0,0,5.493-5.494V58.27a5.5,5.5,0,0,0-5.486-5.494Z"/>
                    <path id="Path_476" data-name="Path 476" d="M186.993,238.779a2.409,2.409,0,0,1-1.692-.7c-.054-.056-.107-.115-.159-.175a2.284,2.284,0,0,1-.139-.188,2.127,2.127,0,0,1-.119-.2c-.037-.068-.07-.14-.1-.212s-.056-.146-.08-.22-.041-.159-.057-.228a2.181,2.181,0,0,1-.035-.231,2.336,2.336,0,0,1-.011-.236,2.283,2.283,0,0,1,.011-.234c.008-.078.021-.159.035-.232a1.952,1.952,0,0,1,.057-.226c.022-.067.049-.15.08-.221s.064-.142.1-.21a2.328,2.328,0,0,1,.119-.2c.043-.064.089-.127.139-.188a2.352,2.352,0,0,1,.159-.175,2.412,2.412,0,0,1,1.923-.688c.078.008.159.021.232.035a1.96,1.96,0,0,1,.226.057c.067.022.15.049.221.08s.142.064.21.1.137.076.2.119a2.281,2.281,0,0,1,.188.139,2.055,2.055,0,0,1,.174.159c.054.056.108.115.159.175a2.188,2.188,0,0,1,.139.188,2.328,2.328,0,0,1,.119.2q.056.1.1.21c.03.072.056.146.08.221a2.24,2.24,0,0,1,.057.226c.016.076.027.159.035.232a2.284,2.284,0,0,1,.011.234,1.68,1.68,0,0,1-.011.236c-.011.076-.021.159-.035.231a2.169,2.169,0,0,1-.057.228c-.022.068-.049.148-.08.22s-.064.143-.1.212-.076.135-.119.2-.091.127-.139.188a2.047,2.047,0,0,1-.159.175c-.056.056-.113.108-.174.159a2.188,2.188,0,0,1-.188.139,2.317,2.317,0,0,1-.2.119q-.1.055-.21.1c-.072.03-.146.056-.221.08a2.245,2.245,0,0,1-.226.057c-.076.016-.159.027-.232.035A2.189,2.189,0,0,1,186.993,238.779Z" transform="translate(-109.69 -156.391)"/>
                    <path id="Path_477" data-name="Path 477" d="M298.02,238.761a1.624,1.624,0,0,1-.234-.011c-.075-.011-.159-.021-.232-.035a2.064,2.064,0,0,1-.228-.057c-.068-.022-.148-.049-.22-.08s-.142-.064-.21-.1a2.33,2.33,0,0,1-.2-.119c-.064-.043-.127-.089-.188-.139a2.353,2.353,0,0,1-.175-.159c-.056-.056-.108-.115-.159-.175a2.184,2.184,0,0,1-.138-.188,2.31,2.31,0,0,1-.119-.2q-.056-.1-.1-.21c-.03-.072-.056-.146-.08-.22s-.041-.159-.057-.228a2.177,2.177,0,0,1-.035-.231,2.276,2.276,0,0,1-.011-.236,1.669,1.669,0,0,1,.011-.236c.011-.076.021-.159.035-.231a2.171,2.171,0,0,1,.057-.228c.022-.068.049-.148.08-.22s.064-.143.1-.212.076-.135.119-.2a2.283,2.283,0,0,1,.138-.188,2.366,2.366,0,0,1,.159-.175c.056-.056.115-.108.175-.159a2.182,2.182,0,0,1,.188-.139,2.33,2.33,0,0,1,.2-.119q.1-.054.21-.1c.072-.03.146-.056.22-.08s.159-.041.228-.057a2.148,2.148,0,0,1,.232-.035,2.571,2.571,0,0,1,.47,0c.076.008.159.021.231.035a2.169,2.169,0,0,1,.228.057c.068.022.148.049.22.08s.142.064.21.1a2.325,2.325,0,0,1,.2.119c.064.043.127.089.188.139a2.362,2.362,0,0,1,.175.159c.056.056.108.115.159.175a2.283,2.283,0,0,1,.138.188q.064.1.119.2c.037.068.07.14.1.212s.056.146.08.22.041.159.057.228a2.177,2.177,0,0,1,.035.231,2.5,2.5,0,0,1,0,.478c-.008.076-.021.159-.035.231a2.169,2.169,0,0,1-.057.228c-.022.068-.049.148-.08.22s-.064.142-.1.21a2.31,2.31,0,0,1-.119.2c-.043.064-.089.127-.138.188s-.1.119-.159.175-.115.108-.175.159a2.185,2.185,0,0,1-.188.138,2.322,2.322,0,0,1-.2.119q-.1.054-.21.1c-.072.03-.146.056-.22.08a2.156,2.156,0,0,1-.228.057c-.076.016-.159.027-.231.035A2.293,2.293,0,0,1,298.02,238.761Z" transform="translate(-203.044 -156.373)"/>
                    <path id="Path_478" data-name="Path 478" d="M242.518,238.759a2.323,2.323,0,0,1-.234-.011c-.078-.008-.159-.021-.232-.035s-.151-.035-.226-.057a2.122,2.122,0,0,1-.22-.08c-.072-.03-.143-.064-.212-.1a2.483,2.483,0,0,1-.39-.258,2.053,2.053,0,0,1-.174-.159,2.334,2.334,0,0,1-.159-.175c-.049-.06-.1-.124-.14-.188a2.328,2.328,0,0,1-.119-.2q-.054-.1-.1-.21c-.029-.072-.056-.146-.078-.221a2.14,2.14,0,0,1-.057-.226,2.3,2.3,0,0,1-.046-.466,2.332,2.332,0,0,1,.011-.236,2.306,2.306,0,0,1,.035-.231,2.274,2.274,0,0,1,.057-.228c.022-.073.049-.148.078-.22a2.114,2.114,0,0,1,.1-.21,2.325,2.325,0,0,1,.119-.2c.043-.064.091-.127.14-.188a2.337,2.337,0,0,1,.159-.175c.054-.054.113-.108.174-.159a2.481,2.481,0,0,1,.39-.258c.068-.037.14-.07.212-.1s.145-.056.22-.08.151-.041.226-.057.159-.027.232-.035a2.569,2.569,0,0,1,.478,0c.078.008.159.021.231.035a2.166,2.166,0,0,1,.228.057c.068.022.148.049.22.08s.143.064.212.1.135.076.2.119a2.31,2.31,0,0,1,.189.139,2.055,2.055,0,0,1,.174.159,2.337,2.337,0,0,1,.159.175c.049.061.1.124.14.188a2.322,2.322,0,0,1,.119.2,2.1,2.1,0,0,1,.1.21,2.27,2.27,0,0,1,.08.22c.022.075.041.159.057.228a2.38,2.38,0,0,1,0,.933,2.133,2.133,0,0,1-.057.226,2.164,2.164,0,0,1-.08.221,2.1,2.1,0,0,1-.1.21c-.037.068-.076.137-.119.2a2.3,2.3,0,0,1-.14.188,2.334,2.334,0,0,1-.159.175c-.054.054-.113.108-.174.159a2.313,2.313,0,0,1-.189.138q-.1.064-.2.119c-.068.037-.14.07-.212.1s-.145.056-.22.08a2.266,2.266,0,0,1-.228.057c-.076.016-.159.027-.231.035A2.335,2.335,0,0,1,242.518,238.759Z" transform="translate(-156.38 -156.371)"/>
                </g>
            </svg>
        </div>
        <div class="form grid-column-center" id="v-model-lang">
            <multiselect v-model="selectedLang" placeholder="Select language" label="name" track-by="lang_code" :options="langOptions" :max-height="200" :show-labels="false" :searchable="false" :allow-empty="false">
                <template slot="singleLabel" slot-scope="props"><img class="option__image mr-3" :src="props.option.icon" :alt="props.option.icon" width="40px" /><span class="option__desc"><span class="option__title">{{ props.option.name }}</span></span></template>
                <template slot="option" slot-scope="props"><img class="option__image mr-3" :src="props.option.icon" :alt="props.option.icon" width="40px">
                <div class="option__desc"><span class="option__title">{{ props.option.name }}</span></div>
                </template>
            </multiselect>
            <a :href="'/set-language/' + selectedLang.lang_code" class="btn btn-lg btn-primary btn-next"><i class="bi bi-caret-right-fill"></i></a>
        </div>
    </div>
</template>

<style src="vue-multiselect/dist/vue-multiselect.min.css"></style>